<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../js/util.js"></script>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var width = canvas.width = window.innerWidth;
    var height = canvas.height = window.innerHeight;
    var stars = [];
    function Star() {
        this.x = Math.random()*width - width/2;
        this.y = Math.random()*height - height/2;
        this.z = Math.random()*width/2;
    }

    Star.prototype.update = function () {
        this.z = this.z - 0.5;
        if(this.z<1){
            this.z = Math.random()*width;
            this.y = Math.random()*height - height/2;
            this.x = Math.random()*width - width/2;
        }
    };

    Star.prototype.show = function () {
        var x = util.map(this.x/this.z, -1, 1, -width/2, width/2);
        var y = util.map(this.y/this.z, -1, 1, -width/2,width/2);
        ctx.beginPath();
        ctx.arc(x,y,8,0,Math.PI*2);
        ctx.fill();
    };

    for (var i = 0; i < 100; i++){
        var star = new Star();
        stars.push(star);
    }

    function loop() {
        ctx.fillStyle = "#000";
        ctx.fillRect(0,0,width,height);
        ctx.save();
        ctx.translate(width/2,height/2);
        ctx.fillStyle = "#fff";
        for (var i = 0; i < stars.length; i++){
            var star = stars[i];
            star.update();
            star.show();
        }

        ctx.restore();

        requestAnimationFrame(loop);
    }

    loop();
</script>
</body>
</html>